<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:adm="http://github.com/adminfaces"
                template="/WEB-INF/templates/template.xhtml">

    
    <ui:define name="params">
            <style type="text/css">
                .ui-datatable .ui-datatable-header {
                    text-align: right !important;
                }

                .year-spinner input {
                    width: 100px
                }

                .ui-button-text-only .ui-button-text {
                    padding: 0.3em 0.4em;
                }

                .ui-selectcheckboxmenu-panel .ui-selectcheckboxmenu-header .ui-chkbox {
                    display: none;
                }
            </style>
    </ui:define>
    <ui:define name="title">
        Datatable
    </ui:define>

    <ui:define name="description">
        This page shows Primefaces datatable.
    </ui:define>

    <ui:define name="body">
        <adm:breadCrumb link="/pages/datatable/datatable" title="Datatable"/>
        <p:panel styleClass="box-info" header="Datatable">
            <h:form>
                <p:dataTable var="car" value="#{datatableMB.cars}" widgetVar="carsTable" paginator="true"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,15" rows="10"
                             emptyMessage="No cars found with given criteria" filteredValue="#{datatableMB.filteredCars}">

                    <f:facet name="header">
                        <p:outputPanel>
                            <h:outputText value="Search all fields:" />
                            <p:spacer height="10"/>
                            <p:inputText id="globalFilter" onkeyup="PF('carsTable').filter()" style="width:150px" placeholder="Enter keyword"/>
                        </p:outputPanel>
                    </f:facet>

                    <p:column filterBy="#{car.id}" sortBy="#{car.id}" headerText="Id" footerText="contains" filterMatchMode="contains">
                        <h:outputText value="#{car.id}" />
                    </p:column>

                    <p:column filterBy="#{car.year}" headerText="Year" footerText="lte" filterMatchMode="lte">
                        <f:facet name="filter">
                            <p:spinner onchange="PF('carsTable').filter()" styleClass="year-spinner">
                                <f:converter converterId="javax.faces.Integer" />
                            </p:spinner>
                        </f:facet>
                        <h:outputText value="#{car.year}" />
                    </p:column>

                    <p:column filterBy="#{car.brand}" headerText="Brand" footerText="exact" filterMatchMode="exact">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('carsTable').filter()" >
                                <f:selectItem itemLabel="Select One" itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{datatableMB.brands}" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{car.brand}" />
                    </p:column>

                    <p:column filterBy="#{car.color}" headerText="Color" footerText="in" filterMatchMode="in">
                        <f:facet name="filter">
                            <p:selectCheckboxMenu label="Colors" onchange="PF('carsTable').filter()" panelStyle="width:125px" scrollHeight="150">
                                <f:selectItems value="#{datatableMB.colors}" />
                            </p:selectCheckboxMenu>
                        </f:facet>
                        <h:outputText value="#{car.color}" />
                    </p:column>

                    <p:column filterBy="#{car.sold}" headerText="Status" footerText="equals" filterMatchMode="equals">
                        <f:facet name="filter">
                            <p:selectOneButton onchange="PF('carsTable').filter()">
                                <f:converter converterId="javax.faces.Boolean" />
                                <f:selectItem itemLabel="All" itemValue="" />
                                <f:selectItem itemLabel="Sold" itemValue="true" />
                                <f:selectItem itemLabel="Sale" itemValue="false" />
                            </p:selectOneButton>
                        </f:facet>
                        <h:outputText value="#{car.sold ? 'Sold': 'Sale'}" />
                    </p:column>

                    <p:column filterBy="#{car.price}" headerText="Price" footerText="custom (min)" filterFunction="#{datatableMB.filterByPrice}">
                        <h:outputText value="#{car.price}">
                            <f:convertNumber currencySymbol="$" type="currency"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:panel>
        
        <p:separator/>

        <p:panel styleClass="box-info" header="SubTable">
            <p:dataTable var="team" value="#{datatableMB.teams}">
                <f:facet name="header">
                    NBA Teams
                </f:facet>

                <p:columnGroup type="header">
                    <p:row>
                        <p:column rowspan="2" headerText="Team" />
                        <p:column colspan="2" headerText="Stats" />
                    </p:row>
                    <p:row>
                        <p:column headerText="Wins" />
                        <p:column headerText="Losses" />
                    </p:row>
                </p:columnGroup>

                <p:subTable var="stats" value="#{team.stats}">
                    <f:facet name="header">
                        <h:outputText value="#{team.name}" />
                    </f:facet>
                    <p:column>
                        <h:outputText value="#{stats.season}" />
                    </p:column>
                    <p:column>
                        <h:outputText value="#{stats.win}" />
                    </p:column>
                    <p:column>
                        <h:outputText value="#{stats.loss}" />
                    </p:column>
                    <p:columnGroup type="footer">
                        <p:row>
                            <p:column footerText="Totals: " style="text-align:right"/>
                            <p:column footerText="#{team.allWins}" />
                            <p:column footerText="#{team.allLosses}" />
                        </p:row>
                    </p:columnGroup>
                </p:subTable>
            </p:dataTable>
        </p:panel>
    </ui:define>

    <ui:define name="code">
         <p:tabView>
       <p:tab title="datatable.xhtml">
           <pre>
               <code class="language-html">&lt;ui:define name="params"&gt;
            &lt;style type="text/css"&gt;
                .ui-datatable .ui-datatable-header {
                    text-align: right !important;
                }

                .year-spinner input {
                    width: 100px
                }

                .ui-button-text-only .ui-button-text {
                    padding: 0.3em 0.4em;
                }

                .ui-selectcheckboxmenu-panel .ui-selectcheckboxmenu-header .ui-chkbox {
                    display: none;
                }
            &lt;/style&gt;
    &lt;/ui:define&gt;
    &lt;ui:define name="title"&gt;
        Datatable
    &lt;/ui:define&gt;

    &lt;ui:define name="description"&gt;
        This page shows Primefaces datatable.
    &lt;/ui:define&gt;

    &lt;ui:define name="body"&gt;
        &lt;adm:breadCrumb link="/pages/datatable/datatable" title="Datatable"/&gt;
        &lt;p:panel styleClass="box-info" header="Datatable"&gt;
            &lt;h:form&gt;
                &lt;p:dataTable var="car" value="\#{datatableMB.cars}" widgetVar="carsTable" paginator="true"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,15" rows="10"
                             emptyMessage="No cars found with given criteria" filteredValue="\#{datatableMB.filteredCars}"&gt;

                    &lt;f:facet name="header"&gt;
                        &lt;p:outputPanel&gt;
                            &lt;h:outputText value="Search all fields:" /&gt;
                            &lt;p:spacer height="10"/&gt;
                            &lt;p:inputText id="globalFilter" onkeyup="PF('carsTable').filter()" style="width:150px" placeholder="Enter keyword"/&gt;
                        &lt;/p:outputPanel&gt;
                    &lt;/f:facet&gt;

                    &lt;p:column filterBy="\#{car.id}" sortBy="\#{car.id}" headerText="Id" footerText="contains" filterMatchMode="contains"&gt;
                        &lt;h:outputText value="\#{car.id}" /&gt;
                    &lt;/p:column&gt;

                    &lt;p:column filterBy="\#{car.year}" headerText="Year" footerText="lte" filterMatchMode="lte"&gt;
                        &lt;f:facet name="filter"&gt;
                            &lt;p:spinner onchange="PF('carsTable').filter()" styleClass="year-spinner"&gt;
                                &lt;f:converter converterId="javax.faces.Integer" /&gt;
                            &lt;/p:spinner&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="\#{car.year}" /&gt;
                    &lt;/p:column&gt;

                    &lt;p:column filterBy="\#{car.brand}" headerText="Brand" footerText="exact" filterMatchMode="exact"&gt;
                        &lt;f:facet name="filter"&gt;
                            &lt;p:selectOneMenu onchange="PF('carsTable').filter()" &gt;
                                &lt;f:selectItem itemLabel="Select One" itemValue="\#{null}" noSelectionOption="true" /&gt;
                                &lt;f:selectItems value="\#{datatableMB.brands}" /&gt;
                            &lt;/p:selectOneMenu&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="\#{car.brand}" /&gt;
                    &lt;/p:column&gt;

                    &lt;p:column filterBy="\#{car.color}" headerText="Color" footerText="in" filterMatchMode="in"&gt;
                        &lt;f:facet name="filter"&gt;
                            &lt;p:selectCheckboxMenu label="Colors" onchange="PF('carsTable').filter()" panelStyle="width:125px" scrollHeight="150"&gt;
                                &lt;f:selectItems value="\#{datatableMB.colors}" /&gt;
                            &lt;/p:selectCheckboxMenu&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="\#{car.color}" /&gt;
                    &lt;/p:column&gt;

                    &lt;p:column filterBy="\#{car.sold}" headerText="Status" footerText="equals" filterMatchMode="equals"&gt;
                        &lt;f:facet name="filter"&gt;
                            &lt;p:selectOneButton onchange="PF('carsTable').filter()"&gt;
                                &lt;f:converter converterId="javax.faces.Boolean" /&gt;
                                &lt;f:selectItem itemLabel="All" itemValue="" /&gt;
                                &lt;f:selectItem itemLabel="Sold" itemValue="true" /&gt;
                                &lt;f:selectItem itemLabel="Sale" itemValue="false" /&gt;
                            &lt;/p:selectOneButton&gt;
                        &lt;/f:facet&gt;
                        &lt;h:outputText value="\#{car.sold ? 'Sold': 'Sale'}" /&gt;
                    &lt;/p:column&gt;

                    &lt;p:column filterBy="\#{car.price}" headerText="Price" footerText="custom (min)" filterFunction="\#{datatableMB.filterByPrice}"&gt;
                        &lt;h:outputText value="\#{car.price}"&gt;
                            &lt;f:convertNumber currencySymbol="$" type="currency"/&gt;
                        &lt;/h:outputText&gt;
                    &lt;/p:column&gt;
                &lt;/p:dataTable&gt;
            &lt;/h:form&gt;
        &lt;/p:panel&gt;

        &lt;p:separator/&gt;

        &lt;p:panel styleClass="box-info" header="SubTable"&gt;
            &lt;p:dataTable var="team" value="\#{datatableMB.teams}"&gt;
                &lt;f:facet name="header"&gt;
                    NBA Teams
                &lt;/f:facet&gt;

                &lt;p:columnGroup type="header"&gt;
                    &lt;p:row&gt;
                        &lt;p:column rowspan="2" headerText="Team" /&gt;
                        &lt;p:column colspan="2" headerText="Stats" /&gt;
                    &lt;/p:row&gt;
                    &lt;p:row&gt;
                        &lt;p:column headerText="Wins" /&gt;
                        &lt;p:column headerText="Losses" /&gt;
                    &lt;/p:row&gt;
                &lt;/p:columnGroup&gt;

                &lt;p:subTable var="stats" value="\#{team.stats}"&gt;
                    &lt;f:facet name="header"&gt;
                        &lt;h:outputText value="\#{team.name}" /&gt;
                    &lt;/f:facet&gt;
                    &lt;p:column&gt;
                        &lt;h:outputText value="\#{stats.season}" /&gt;
                    &lt;/p:column&gt;
                    &lt;p:column&gt;
                        &lt;h:outputText value="\#{stats.win}" /&gt;
                    &lt;/p:column&gt;
                    &lt;p:column&gt;
                        &lt;h:outputText value="\#{stats.loss}" /&gt;
                    &lt;/p:column&gt;
                    &lt;p:columnGroup type="footer"&gt;
                        &lt;p:row&gt;
                            &lt;p:column footerText="Totals: " style="text-align:right"/&gt;
                            &lt;p:column footerText="\#{team.allWins}" /&gt;
                            &lt;p:column footerText="\#{team.allLosses}" /&gt;
                        &lt;/p:row&gt;
                    &lt;/p:columnGroup&gt;
                &lt;/p:subTable&gt;
            &lt;/p:dataTable&gt;
        &lt;/p:panel&gt;
    &lt;/ui:define&gt;

&lt;/ui:composition&gt;

                </code>
           </pre>
       </p:tab>
 </p:tabView>
    </ui:define>
</ui:composition>
